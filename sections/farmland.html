<!-- SLIDE 6: FARMLAND -->
<div class="slide-content">
    <div class="section-number">07</div>
    <div class="section-label">Příroda je Pohoda</div>
    <h2>Jaké Farmy? <span class="gdp-tag green">1.6% GDP</span></h2>
    <br/>
    <div class="chart-container">
        <div class="chart-title">Typy Farem (%) — <a href="https://csu.gov.cz/kraje-spolecne/crop-production" target="_blank" style="color: var(--accent-gold);">Czech Statistical Office</a></div>
        <div class="chart-wrapper">
            <canvas id="farmlandChart"></canvas>
        </div>
    </div>

    <div class="map-container">
        <div class="chart-title">České regiony farem — <a href="https://www.britannica.com/place/Hana-Valley" target="_blank" style="color: var(--accent-gold);">Britannica</a>, <a href="https://csu.gov.cz/crop-production" target="_blank" style="color: var(--accent-gold);">ČSÚ</a></div>
        <svg viewBox="0 0 612.46 350.62" xmlns="http://www.w3.org/2000/svg">
            <image href="https://jsvan.github.io/cz-econ-presentation/czech-republic.svg" width="612.46" height="350.62"/>

            <!-- ALL SHAPES FIRST (so text renders on top) -->
            <!-- South Bohemia -->
            <ellipse cx="180" cy="260" rx="70" ry="50" fill="#14b8a6" opacity="0.3"/>
            <circle cx="180" cy="260" r="5" fill="#14b8a6"/>
            <!-- Vysočina -->
            <ellipse cx="317" cy="232" rx="55" ry="40" fill="#14b8a6" opacity="0.3"/>
            <circle cx="317" cy="232" r="5" fill="#14b8a6"/>
            <!-- Polabí -->
            <ellipse cx="300" cy="125" rx="50" ry="28" fill="#c9a227" opacity="0.35"/>
            <circle cx="300" cy="125" r="5" fill="#c9a227"/>
            <!-- Haná -->
            <ellipse cx="467" cy="205" rx="30" ry="22" fill="#c9a227" opacity="0.35"/>
            <circle cx="467" cy="205" r="5" fill="#c9a227"/>
            <!-- Wine region -->
            <ellipse cx="400" cy="315" rx="40" ry="15" fill="#7c3aed" opacity="0.5"/>
            <circle cx="400" cy="315" r="4" fill="#7c3aed"/>
            <!-- Hops region -->
            <ellipse cx="132" cy="102" rx="12" ry="8" fill="#b8342e" opacity="0.5"/>
            <circle cx="132" cy="102" r="3" fill="#b8342e"/>
            <!-- Prague marker -->
            <circle cx="212" cy="137" r="4" fill="#555"/>
            <!-- Olomouc marker -->
            <circle cx="467" cy="205" r="4" fill="#555"/>

            <!-- ALL TEXT LAST (renders on top of shapes) -->
            <text x="180" y="225" fill="#14b8a6" font-size="10" text-anchor="middle" font-weight="bold">J. Čechy</text>
            <text x="180" y="310" fill="#14b8a6" font-size="8" text-anchor="middle">Brambory, rybníky</text>
            <text x="317" y="200" fill="#14b8a6" font-size="10" text-anchor="middle" font-weight="bold">Vysočina</text>
            <text x="317" y="280" fill="#14b8a6" font-size="8" text-anchor="middle">Brambory, krmivo</text>
            <text x="300" y="95" fill="#c9a227" font-size="10" text-anchor="middle" font-weight="bold">Polabí</text>
            <text x="300" y="163" fill="#c9a227" font-size="8" text-anchor="middle">Obilí, cukr</text>
            <text x="467" y="182" fill="#c9a227" font-size="10" text-anchor="middle" font-weight="bold">Haná</text>
            <text x="467" y="238" fill="#c9a227" font-size="8" text-anchor="middle">Obilí, kukuřice</text>
            <text x="445" y="318" fill="#7c3aed" font-size="10" font-weight="bold">Víno</text>
            <text x="157" y="105" fill="#b8342e" font-size="10" font-weight="bold">Chmel (Hops)</text>
            <text x="212" y="127" fill="#fff" font-size="9" text-anchor="middle" font-weight="bold">Praha</text>
            <text x="467" y="195" fill="#fff" font-size="9" text-anchor="middle">Olomouc</text>
        </svg>
        <div class="map-legend">
            <div class="legend-item"><div class="legend-dot" style="background: #c9a227;"></div>Nížiny — obilí, olej (<a href="https://www.britannica.com/place/Hana-Valley" target="_blank" class="src">Britannica</a>)</div>
            <div class="legend-item"><div class="legend-dot" style="background: #14b8a6;"></div>Vysočiny — brambory, krmivo (<a href="https://www.potatopro.com/czech-republic/potato-statistics" target="_blank" class="src">PotatoPro</a>)</div>
            <div class="legend-item"><div class="legend-dot" style="background: #7c3aed;"></div>Víno (<a href="https://www.vinarskecentrum.cz/en/o-vine/vinarske-regiony-v-cr" target="_blank" class="src">Vinařské centrum</a>)</div>
            <div class="legend-item"><div class="legend-dot" style="background: #b8342e;"></div>Chmel (Hops)</div>
        </div>
    </div>

    
</div>

<script>
window.initChartsSlide6 = function() {
    const canvas = document.getElementById('farmlandChart');
    if (!canvas) return;

    // Destroy existing chart
    if (window.ChartRegistry) ChartRegistry.destroy('farmlandChart');

    const chart = new Chart(canvas, {
        type: 'doughnut',
        data: {
            labels: ['Obilí', 'Tráva', 'Na olej', 'Krmivo', 'Zelenina', 'Víno'],
            datasets: [{
                data: [45, 27, 14, 9, 4, 1],
                backgroundColor: [ChartColors.gold, ChartColors.green, ChartColors.blue, '#f97316', ChartColors.gray, ChartColors.red],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                },
                datalabels: {
                    display: true,
                    color: '#fff',
                    font: { weight: 'bold', size: 11 },
                    formatter: function(value, ctx) {
                        if (value < 4) return '';
                        const label = ctx.chart.data.labels[ctx.dataIndex];
                        return label + '\n' + value + '%';
                    },
                    textAlign: 'center'
                }
            }
        },
        plugins: [ChartDataLabels]
    });

    if (window.ChartRegistry) ChartRegistry.register('farmlandChart', chart);
};
</script>
